(()=>{var d=(r,i=null,n=null)=>{let a=document.createElement(r);return i&&(a.className=i),n&&(a.innerHTML=n),a};HTMLElement.prototype.create=function(r,i=null,n=null){let a=d(r,i,n);return this.append(a),a};var e=(r=0,i=1)=>Math.random()*(i-r)+r;var m={colors:["yellow","blue","pink","green"],bubbles:30,fishes:12,blur:!1,init:function(){new URLSearchParams(window.location.search)?.get("blur")!==null&&(this.blur=!0),this.blur&&document.body.style.setProperty("--blur","0.32vmin");let r=document.body.create("div","bubble-field"),i=Promise.all([...Array(this.bubbles).keys()].map(async a=>{let s=3+.5*(Math.floor(Math.random()*20)+1),t=(0-Math.random()*s).toFixed(2),o=d("div");return o.create("div"),o.style.animationDelay=`${t}s`,o.style.animationDuration=`${s}s`,o})),n=Promise.all([...Array(this.fishes).keys()].map(async a=>{let s=this.colors[Math.floor(Math.random()*4)],t=d("div",`fish ${s}`),o=.3-a/this.fishes*.3,l=a+16;return t.style.setProperty("--size",`${l}vmin`),this.blur&&t.style.setProperty("filter",`blur(${o}vmin)`),t.create("div","top-fin"),t.create("div","fish-body"),t.create("div","tail-fin"),t.create("div","side-fin"),t.create("div","scale scale-1"),t.create("div","scale scale-2"),t.create("div","scale scale-3"),t.style.top=(Math.floor(Math.random()*65)+25).toFixed(2)+"vh",this.shuffle(t,!0),t}));return new Promise(a=>Promise.all([new Promise(async s=>s(r.append(...await i))),new Promise(async s=>s(document.body.append(...await n)))]).then(()=>a(this)))},shuffle:async function(r,i=!1){let n=Math.random()*20+20,a=(0-Math.random()*n).toFixed(2),s=this.randomCubicBezier({style:"any",yMin:.15,yMax:.65}).css;r.animate([{offset:0,transform:"translate(var(--size))"},{offset:.1,transform:"translate(40vw, -12.5vh)"},{offset:.2,transform:"translate(50vw, -4.5vh) rotateZ(22deg)"},{offset:.3,transform:"translate(60vw, -25vh)"},{offset:.4,transform:"translate(80vw, -8vh) rotateZ(22deg)"},{offset:.5,transform:"translate(100vw, -14.5vh)"},{offset:.51,transform:"translate(100vw, -14.5vh) rotateY(180deg)"},{offset:.6,transform:"translate(80vw, -8vh) rotateY(180deg) rotateZ(22deg)"},{offset:.7,transform:"translate(60vw, -25vh) rotateY(180deg)"},{offset:.8,transform:"translate(50vw, -4.5vh) rotateY(180deg) rotateZ(22deg)"},{offset:.9,transform:"translate(40vw, -12.5vh) rotateY(180deg)"},{offset:.99,transform:"translate(var(--size)) rotateY(180deg) rotateZ(22deg)"},{offset:1,transform:"translate(var(--size))"}],{duration:n*1e3,delay:i?a*1e3:0,iterations:1,easing:s,fill:"forwards",direction:"normal"}).finished.then(()=>this.shuffle(r))},randomCubicBezier:(r={})=>{let{style:i="any",yMin:n=null,yMax:a=null}=r,s,t,o,l;switch(i){case"in":s=e(.05,.45),t=e(0,.9),o=e(.3,.9),l=e(.8,1.2);break;case"out":s=e(.1,.7),t=e(0,.3),o=e(.55,.95),l=e(0,1);break;case"inOut":s=e(.15,.45),t=e(0,.8),o=e(.55,.85),l=e(.2,1);break;case"overshoot":s=e(.1,.5),t=e(-.4,.8),o=e(.5,.9),l=e(1.1,1.8);break;default:s=e(0,1),t=e(-.5,1.5),o=e(0,1),l=e(-.5,1.5)}n!==null&&(t=Math.max(t,n),l=Math.max(l,n)),a!==null&&(t=Math.min(t,a),l=Math.min(l,a));let c=h=>Number(h.toFixed(3)),f={x1:c(s),y1:c(t),x2:c(o),y2:c(l)};return{...f,css:`cubic-bezier(${f.x1}, ${f.y1}, ${f.x2}, ${f.y2})`}}}.init();})();
